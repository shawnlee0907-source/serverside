<!DOCTYPE html>
<html>
<head>
  <title>Flight Details</title>
  <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/css/bootstrap.min.css" rel="stylesheet">
  <link href="/style.css" rel="stylesheet">
</head>
<body class="bg-light">
  <div class="container mt-5">
    <div class="card shadow">
      <div class="card-header bg-primary text-white">
        <h3>Flight Details: <%= flight.flightNumber || 'Unknown' %></h3>
        <p class="mb-0">Welcome, <%= user.name || 'User' %> (ID: <%= user.id %>) | 
           <a href="/list" class="text-white">Back to Dashboard</a> | 
           <a href="/logout" class="text-white">Logout</a>
        </p>
      </div>
      <div class="card-body">
        <div class="row">
          <div class="col-md-6">
            <p><strong>Flight Number:</strong> <%= flight.flightNumber || 'N/A' %></p>
            <p><strong>Airline:</strong> <%= flight.airline || 'N/A' %></p>
            <p><strong>From â†’ To:</strong> 
              <%= flight.departureAirport || 'HKG' %> to 
              <%= flight.arrivalAirport || flight.destination || 'N/A' %>
            </p>
            <p><strong>Time:</strong> 
              <%= String(flight.hours || '00').padStart(2,'0') %>:<%= String(flight.minutes || '00').padStart(2,'0') %>
            </p>
            <p><strong>Gate:</strong> <%= flight.gate || 'N/A' %></p>
            <p><strong>Status:</strong> 
              <span class="badge bg-success"><%= flight.status || 'On Time' %></span>
            </p>
          </div>
          <div class="col-md-6">
            <% if (flight.photo) { %>
              <img src="data:image/png;base64,<%= flight.photo %>" class="img-fluid rounded" style="max-height: 300px;">
            <% } else { %>
              <div class="bg-light border rounded text-center p-5">
                <p class="text-muted">No photo uploaded</p>
              </div>
            <% } %>
          </div>
        </div>
        <hr>
        <a href="/edit?_id=<%= flight._id %>" class="btn btn-warning">Edit</a>
        <form action="/flights/<%= flight.flightNumber %>?_method=DELETE" method="POST" class="d-inline">
          <button type="submit" class="btn btn-danger" onclick="return confirm('Delete this flight?')">Delete</button>
        </form>
      </div>
    </div>
  </div>
</body>
</html>
